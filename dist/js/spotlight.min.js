/**
 * Spotlight.js v0.7.8
 * Copyright 2019-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b,c){a.classList[c?"add":"remove"](b)}function g(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){b&&(g(a,"transition","none"),b());aa||(aa=a.clientTop&&0);b&&g(a,"transition","")}function h(a,b,c,e){k(!0,a,b,c,e)}function k(a,b,c,e,f){b[(a?"add":"remove")+"EventListener"](c,e,f||!1===f?f:!0)}function ca(a,b){a.stopPropagation();b&&a.preventDefault()}function l(a,b){g(a,"display",b?"":"none")}
function m(a,b){g(a,"visibility",b?"":"hidden")}function n(a,b){g(a,"transition",b?"":"none")};var p="info theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),da={info:1,page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1};var q=document.createElement("div");q.id="spotlight";q.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";var ea={},fa=document.createElement("video");function ha(a,b,c,e){if("node"!==e)for(var f=Object.keys(c),A=0,w;A<f.length;A++)if(w=f[A],3<w.length&&0===w.indexOf("src"))if("video"===e){var F=ea[w];if(F){if(0<F){var Ka=c[w];break}}else if(fa.canPlayType("video/"+w.substring(3).replace("-","").toLowerCase())){ea[w]=1;Ka=c[w];break}else ea[w]=-1}else if(F=parseInt(w.substring(4),10))if(F=Math.abs(b-F),!ib||F<ib){var ib=F;Ka=c[w]}return Ka||c.src||c.href||a.src||a.href};var r={},ia=navigator.connection,ja=window.devicePixelRatio||1,t,u,ka,la,v,ma,na,oa,x,pa,qa,ra,y,z,B,C,D,E,sa,ta,G,ua,va,wa,xa,ya,za,H,Aa,Ba,Ca,Da,I,Ea,Fa,Ga,Ha,J,K,L,Ia,M,Ja=document.createElement("img"),La,Ma,N,Na=0,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,O,Wa,P,Q,R,S,Xa,T,Ya;h(document,"click",Za);
function $a(){function a(c){return r[c]=(q||document).getElementsByClassName("spl-"+c)[0]}if(!K){K=document.body;La=a("scene");Ma=a("header");N=a("footer");Oa=a("title");Pa=a("description");Qa=a("button");Ra=a("prev");Sa=a("next");Ua=a("page");O=a("progress");Wa=a("spinner");Ia=[a("pane")];U("close",ab);K[T="requestFullscreen"]||K[T="msRequestFullscreen"]||K[T="webkitRequestFullscreen"]||K[T="mozRequestFullscreen"]||(T="");T?(Ya=T.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Ta=U("fullscreen",bb)):p.pop();U("info",cb);U("autofit",V);U("zoom-in",db);U("zoom-out",eb);U("theme",fb);Va=U("play",W);U("download",gb);h(Ra,"click",hb);h(Sa,"click",jb);var b=a("track");h(b,"mousedown",kb);h(b,"mousemove",lb);h(b,"mouseleave",mb);h(b,"mouseup",mb);h(b,"touchstart",kb,{passive:!1});h(b,"touchmove",lb,{passive:!0});h(b,"touchend",mb);h(b,"gestureend",function(c){1>c.scale?eb():1<c.scale&&db()},!1);h(Qa,"click",function(){Da?Da(B,E):Ca&&(location.href=Ca)})}}
function U(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);Ma.appendChild(c);return r[a]=c}function Za(a){var b=a.target.closest(".spotlight");if(b){ca(a,!0);a=b.closest(".spotlight-group");D=(a||document).getElementsByClassName("spotlight");for(var c=0;c<D.length;c++)if(D[c]===b){ta=a&&a.dataset;nb(c+1);break}}}
function nb(a){if(C=D.length){K||$a();va&&va(a);for(var b=Ia[0],c=b.parentNode,e=Ia.length;e<C;e++){var f=b.cloneNode(!1);g(f,"left",100*e+"%");c.appendChild(f);Ia[e]=f}L||(K.appendChild(q),ob());B=a||1;n(La);pb(!0);T&&l(Ta,0<screen.availHeight-window.innerHeight);history.pushState({spl:1},"");history.pushState({spl:2},"");n(q,!0);d(K,"hide-scrollbars",!0);d(q,"show",!0);qb(!0);ob();X();H&&W(!0,!0)}}function Y(a,b){a=E[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}
function rb(a){a?ba(M,rb):(n(La,Ha),g(M,"opacity",Ga?0:1),sb(Fa&&.8),J&&d(M,J,!0))}
function tb(a){L=Ia[a-1];M=L.firstChild;B=a;if(M)y&&V(),ya&&d(M,ya,!0),rb(!0),J&&d(M,J),Ga&&g(M,"opacity",1),Fa&&g(M,"transform",""),g(M,"visibility","visible"),Q&&(Ja.src=Q),H&&ub(R);else{var b=P.media,c=Y("spinner",!0);if("video"===b)vb(c,!0),M=document.createElement("video"),M.onloadedmetadata=function(){M===this&&(M.onerror=null,M.width=M.videoWidth,M.height=M.videoHeight,wb(),vb(c),tb(a))},M.poster=E.poster,M.preload=Ba?"auto":"metadata",M.controls=Y("controls",!0),M.autoplay=E.autoplay,M.h=
Y("inline"),M.muted=Y("muted"),M.src=P.src,L.appendChild(M);else{if("node"===b){M=P.src;"string"===typeof M&&(M=document.querySelector(M));M&&(M.g||(M.g=M.parentNode),wb(),L.appendChild(M),tb(a));return}vb(c,!0);M=document.createElement("img");M.onload=function(){M===this&&(M.onerror=null,vb(c),tb(a),wb())};M.src=P.src;L.appendChild(M)}M&&(c||g(M,"visibility","visible"),M.onerror=function(){M===this&&(xb(M),d(Wa,"error",!0),vb(c))})}}function vb(a,b){a&&d(Wa,"spin",b)}
function yb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function zb(){ob();M&&wb();if(T){var a=yb();d(Ta,"on",a);a||l(Ta,0<screen.availHeight-window.innerHeight)}}function ob(){v=q.clientWidth;ma=q.clientHeight}function wb(){na=M.clientWidth;oa=M.clientHeight}function sb(a){g(M,"transform","translate(-50%, -50%) scale("+(a||x)+")")}function Z(a,b){g(L,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}
function Ab(a,b,c){b?ba(La,function(){Ab(a,!1,c)}):g(La,"transform","translateX("+(100*-a+(c||0))+"%)")}function qb(a){k(a,window,"keydown",Bb);k(a,window,"wheel",Cb);k(a,window,"resize",zb);k(a,window,"popstate",Db)}function Db(a){L&&a.state.spl&&ab(!0)}
function Bb(a){if(L){var b=!1!==E["zoom-in"];switch(a.keyCode){case 8:b&&V();break;case 27:ab();break;case 32:H&&W();break;case 37:hb();break;case 39:jb();break;case 38:case 107:case 187:b&&db();break;case 40:case 109:case 189:b&&eb();break;case 73:cb()}}}function Cb(a){L&&!1!==E["zoom-in"]&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?eb():db())}function W(a,b){("boolean"===typeof a?a:!R)===!R&&(R=R?clearTimeout(R):1,d(Va,"on",R),b||ub(R))}
function ub(a){ua&&(ba(O,function(){g(O,"transition-duration","");g(O,"transform","")}),a&&(g(O,"transition-duration",Ea+"s"),g(O,"transform","translateX(0)")));a&&(R=setTimeout(jb,1E3*Ea))}function X(){za&&(Xa=Date.now()+2950,S||(d(q,"menu",!0),Eb(3E3)))}function Eb(a){S=setTimeout(function(){var b=Date.now();b>=Xa?(d(q,"menu"),S=0):Eb(Xa-b)},a)}function Fb(a){"boolean"===typeof a&&(S=a?S:0);S?(S=clearTimeout(S),d(q,"menu")):X()}
function kb(a){ca(a,!0);pa=!0;qa=!1;var b=a.touches;b&&(b=b[0])&&(a=b);ra=na*x<=v;ka=a.pageX;la=a.pageY;n(L)}function mb(a){ca(a);if(pa){if(qa){if(ra&&qa){var b=t<-(v/7)&&(B<C||G),c=b||t>v/7&&(1<B||G);b||c?(Ab(B-1,!0,t/v*100),b&&jb()||c&&hb()):Math.abs(a.pageY-la)-Math.abs(a.pageX-ka)>screen.height/5&&ab();t=0;Z()}n(L,!0)}else Fb();pa=!1}}
function lb(a){ca(a);if(pa){var b=a.touches;b&&(b=b[0])&&(a=b);b=(na*x-v)/2;t-=ka-(ka=a.pageX);ra||(t>b?t=b:t<-b&&(t=-b),oa*x>ma&&(b=(oa*x-ma)/2,u-=la-(la=a.pageY),u>b?u=b:u<-b&&(u=-b)));qa=!0;Z(t,u)}else X()}function bb(a){var b=yb();if("boolean"!==typeof a||a!==!!b)if(b)document[Ya]();else q[T]()}function fb(a){"string"!==typeof a&&(a=z?"":Aa||"white");z!==a&&(z&&d(q,z),a&&d(q,a,!0),z=a)}
function V(a){"boolean"===typeof a&&(y=!a);y=1===x&&!y;d(M,"autofit",y);g(M,"transform","");x=1;u=t=0;wb();n(L);Z()}function db(){var a=x/.65;50>=a&&(y&&V(),t/=.65,u/=.65,Z(t,u),Gb(a))}function eb(){var a=.65*x;y&&V();1<=a&&(1===a?t=u=0:(t*=.65,u*=.65),Z(t,u),Gb(a))}function Gb(a){x=a||1;sb()}function cb(){Na=!Na;m(N,Na)}function gb(){var a=K,b=document.createElement("a"),c=M.src;b.href=c;b.download=c.substring(c.lastIndexOf("/")+1);a.appendChild(b);b.click();a.removeChild(b)}
function ab(a){setTimeout(function(){K.removeChild(q);L=M=P=E=ta=D=va=wa=xa=Da=null},200);d(K,"hide-scrollbars");d(q,"show");bb(!1);qb();history.go(!0===a?-1:-2);Q&&(Ja.src="");R&&W();M&&xb(M);S&&(S=clearTimeout(S));z&&fb();I&&d(q,I);xa&&xa()}function xb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a);a.src=a.onerror=""}}function hb(a){a&&X();if(1<C){if(1<B)return Hb(B-1);if(G)return Ab(C,!0),Hb(C)}}
function jb(a){a&&X();if(1<C){if(B<C)return Hb(B+1);if(G)return Ab(-1,!0),Hb(1);R&&W()}}function Hb(a){if(a!==B){R?(clearTimeout(R),ub()):X();var b=a>B;B=a;pb(b);return!0}}
function Ib(a){var b=D[B-1],c=b;E={};ta&&Object.assign(E,ta);Object.assign(E,c.dataset||c);sa=E.media;Da=E.onclick;Aa=E.theme;I=E["class"];za=Y("autohide",!0);G=Y("infinite");ua=Y("progress",!0);H=Y("autoslide");Ba=Y("preload",!0);Ca=E.buttonHref;Ea=H&&parseFloat(H)||7;z||Aa&&fb(Aa);I&&d(q,I,!0);I&&ba(q);if(c=E.control){c="string"===typeof c?c.split(","):c;for(var e=0;e<p.length;e++)E[p[e]]=!1;for(e=0;e<c.length;e++){var f=c[e].trim();"zoom"===f?E["zoom-in"]=E["zoom-out"]=!0:E[f]=!0}}c=E.animation;
Fa=Ga=Ha=!c;J=!1;if(c)for(c="string"===typeof c?c.split(","):c,e=0;e<c.length;e++)f=c[e].trim(),"scale"===f?Fa=!0:"fade"===f?Ga=!0:"slide"===f?Ha=!0:f&&(J=f);ya=E.fit;e=ia&&ia.downlink;c=Math.max(ma,v)*ja;e&&1200*e<c&&(c=1200*e);var A;P={media:sa,src:ha(b,c,E,sa),title:Y("title",b.alt||b.title||(A=b.firstElementChild)&&(A.alt||A.title))};Q&&(Ja.src=Q="");Ba&&a&&(b=D[B])&&(a=b.dataset||b,(A=a.media)&&"image"!==A||(Q=ha(b,c,a,A)));for(b=0;b<p.length;b++)a=p[b],l(r[a],Y(a,da[a]))}
function pb(a){u=t=0;x=1;if(M)if(M.onerror)xb(M);else{var b=M;setTimeout(function(){b&&M!==b&&(xb(b),b=null)},650);rb();Z()}N&&m(N,0);Ib(a);Ab(B-1);d(Wa,"error");tb(B);n(L);Z();a=P.title;var c=Y("description"),e=Y("button"),f=a||c||e;f&&(a&&(Oa.firstChild.nodeValue=a),c&&(Pa.firstChild.nodeValue=c),e&&(Qa.firstChild.nodeValue=e),l(Oa,a),l(Pa,c),l(Qa,e),g(N,"transform","all"===za?"":"none"));za||d(q,"menu",!0);m(N,Na&&f);m(Ra,G||1<B);m(Sa,G||B<C);Ua.firstChild.nodeValue=1<C?B+" / "+C:"";wa&&wa(B,E)}
;window.Spotlight={init:$a,theme:fb,fullscreen:bb,download:gb,autofit:V,next:jb,prev:hb,goto:Hb,close:ab,zoom:Gb,menu:Fb,show:function(a,b,c){D=a;b&&(ta=b,va=b.onshow,wa=b.onchange,xa=b.onclose,c=c||b.index);nb(c)},play:W,addControl:U,removeControl:function(a){var b=r[a];b&&(Ma.removeChild(b),r[a]=null)}};}).call(this);
